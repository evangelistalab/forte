#! This tests the Adaptive Path-Integral FCI procedure with no prescreening

import libadaptive

refscf = -14.6097447388741113 #TEST
refapifci = -14.646160290078 #TEST

molecule Li2{
   Li
   Li 1 2.0000
}

set {
  basis sto-3g
  e_convergence 8
}

set libadaptive {
  tau 0.01
  maxiter 10000
  energy_estimate_freq 1000
  start_num_walkers 10000.0
  use_shift true
  shift_freq 10
  shift_damp 0.1
  shift_num_walkers 15000.0
  death_parent_only true
  use_initiator false
  initiator_na 3.0
  spawn_type random
}

energy('fciqmc')

#compare_values(refscf, get_variable("SCF total energy"),7, "SCF energy") #TEST
#compare_values(refapifci, get_variable("APIFCI ENERGY"),7, "APIFCI energy") #TEST

